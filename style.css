<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kelime Zinciri Ã‡ok Oyunculu</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <style>
    /* Google Fonts Import: Poppins (modern ve temiz bir font) */
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

    /* GENEL AYARLAR VE BODY */
    body {
        font-family: 'Poppins', sans-serif; /* Modern ve okunaklÄ± bir font */
        background: linear-gradient(135deg, #f0f4f8 0%, #d9e2ec 100%); /* Hafif gradiyent arka plan */
        color: #334e68; /* Koyu gri, modern metin rengi */
        max-width: 760px; /* Daha geniÅŸ bir ana konteyner */
        margin: 50px auto;
        padding: 40px;
        border-radius: 15px; /* Daha belirgin yuvarlatÄ±lmÄ±ÅŸ kÃ¶ÅŸeler */
        background-color: #ffffff;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15); /* Daha belirgin ve yaygÄ±n bir gÃ¶lge */
        transition: all 0.3s ease-in-out; /* Genel geÃ§iÅŸ animasyonu */
        min-height: 100vh; /* SayfanÄ±n en az viewport yÃ¼ksekliÄŸi kadar olmasÄ± iÃ§in */
        display: flex; /* Flexbox kullanarak iÃ§eriÄŸi dikeyde ortalamak iÃ§in */
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    /* Ana konteynerin iÃ§eriÄŸi merkeze almak iÃ§in */
    body > div {
        width: 100%;
        max-width: 600px; /* Ä°Ã§erik iÃ§in maksimum geniÅŸlik */
        padding: 0; /* body'deki padding'i burada kullanmÄ±yoruz */
    }

    /* BaÅŸlÄ±klar */
    h1, h3, h4 {
        text-align: center;
        color: #2a415b; /* Koyu mavi-gri baÅŸlÄ±klar */
        margin-bottom: 25px; /* BaÅŸlÄ±k alt boÅŸluÄŸu */
        letter-spacing: 0.5px; /* Hafif harf aralÄ±ÄŸÄ± */
    }

    h1 {
        font-size: 2.8em;
        font-weight: 700; /* Daha kalÄ±n */
        color: #007bff; /* Vurgu mavisi */
        text-shadow: 1px 1px 2px rgba(0,0,0,0.05); /* Hafif metin gÃ¶lgesi */
    }

    /* GiriÅŸ ve seÃ§im alanlarÄ± */
    input, select, button {
        width: 100%;
        padding: 12px 15px; /* Daha fazla padding */
        margin: 15px 0;
        border: 1px solid #c2d1e0; /* Daha yumuÅŸak Ã§erÃ§eve rengi */
        border-radius: 8px; /* YuvarlatÄ±lmÄ±ÅŸ kÃ¶ÅŸeler */
        font-size: 1.05rem;
        box-shadow: inset 0 1px 3px rgba(0,0,0,0.08); /* Hafif iÃ§ gÃ¶lge */
        transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    input:focus, select:focus {
        border-color: #007bff;
        box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25); /* OdaklandÄ±ÄŸÄ±nda mavi parlama */
        outline: none; /* VarsayÄ±lan odak Ã§erÃ§evesini kaldÄ±r */
    }

    /* Butonlar */
    button {
        background-image: linear-gradient(to right, #007bff 0%, #0056b3 100%); /* Gradiyent buton */
        color: white;
        border: none;
        font-weight: 600; /* Orta kalÄ±nlÄ±k */
        letter-spacing: 0.8px;
        text-transform: uppercase; /* BÃ¼yÃ¼k harf */
        cursor: pointer;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0, 123, 255, 0.3); /* DÄ±ÅŸ gÃ¶lge */
        transition: all 0.3s ease;
    }

    button:hover {
        background-position: right center; /* Gradiyent efekti */
        box-shadow: 0 6px 15px rgba(0, 123, 255, 0.4);
        transform: translateY(-2px); /* Hafif yukarÄ± kalkma efekti */
    }

    button:disabled {
        background-image: none; /* Gradiyenti kaldÄ±r */
        background-color: #cccccc;
        box-shadow: none;
        transform: none;
        cursor: not-allowed;
        opacity: 0.7; /* Hafif ÅŸeffaflÄ±k */
    }

    /* AyÄ±rÄ±cÄ± Ã‡izgi */
    hr {
        border: 0;
        border-top: 1px dashed #aaddff; /* Kesikli aÃ§Ä±k mavi Ã§izgi */
        margin: 30px 0;
    }

    /* Oyuncu listesi (Lobi ve Oyun SÄ±rasÄ±) */
    #playerList, #playerListGame {
        list-style-type: none;
        padding: 0;
        margin: 15px 0;
        border: 1px solid #e0e6ed;
        border-radius: 10px;
        background-color: #fcfdff;
        max-height: 180px; /* Daha fazla oyuncu iÃ§in yÃ¼kseklik */
        overflow-y: auto;
        box-shadow: inset 0 1px 5px rgba(0,0,0,0.05); /* Hafif iÃ§ gÃ¶lge */
    }

    #playerList li, #playerListGame li {
        padding: 10px 15px;
        border-bottom: 1px solid #eef2f5;
        font-size: 0.95rem;
        color: #4a658a;
        font-weight: 600;
    }

    #playerList li:last-child, #playerListGame li:last-child {
        border-bottom: none;
    }

    /* SÄ±ra gÃ¶stergesi */
    #turnIndicator {
        text-align: center;
        font-size: 1.4rem;
        font-weight: 700;
        padding: 12px;
        border-radius: 10px;
        margin: 20px 0;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        transition: background-color 0.5s ease, color 0.5s ease;
    }

    #turnIndicator.kirmizi {
        background-color: #ffcccc;
        color: #cc0000;
        border: 1px solid #cc0000;
    }

    #turnIndicator.mavi {
        background-color: #cce0ff;
        color: #004d99;
        border: 1px solid #004d99;
    }

    /* Zincir kutularÄ± */
    #chainDisplay p {
        background: #fdfdfd;
        padding: 10px 15px;
        border-radius: 8px;
        margin: 10px 0;
        font-weight: 600;
        font-size: 1.15rem;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        border-left: 5px solid #a8c4db; /* Solunda renkli bir Ã§izgi */
    }

    #chainDisplay p.correct {
        background-color: #e6ffe6; /* Daha aÃ§Ä±k yeÅŸil */
        color: #008000;
        border-left-color: #28a745;
        animation: correctFlash 0.5s ease; /* DoÄŸru tahminde hafif animasyon */
    }

    @keyframes correctFlash {
        0% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.02); opacity: 0.8; }
        100% { transform: scale(1); opacity: 1; }
    }

    /* Skor alanÄ± */
    #scoreBoard {
        text-align: center;
        font-weight: 700;
        font-size: 1.3rem;
        margin-top: 25px;
        padding: 10px 0;
        border-top: 1px dashed #e0e6ed;
        border-bottom: 1px dashed #e0e6ed;
        color: #334e68;
    }

    #scoreBoard span {
        font-size: 1.4rem;
        color: #007bff; /* Skor rakamlarÄ± iÃ§in vurgu rengi */
    }

    /* Durum mesajÄ± */
    #statusMessage {
        text-align: center;
        font-weight: 600;
        margin-top: 25px;
        min-height: 28px; /* Yeterli yÃ¼kseklik */
        padding: 10px;
        border-radius: 8px;
        transition: all 0.3s ease;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    #statusMessage[style*="color: red"] { /* Hata mesajlarÄ± iÃ§in kÄ±rmÄ±zÄ± arka plan */
        background-color: #ffe5e5;
        border: 1px solid #cc0000;
        color: #cc0000;
    }

    #statusMessage[style*="color: green"] { /* BaÅŸarÄ± mesajlarÄ± iÃ§in yeÅŸil arka plan */
        background-color: #e6ffe6;
        border: 1px solid #28a745;
        color: #155724;
    }

    /* YardÄ±m butonlarÄ± */
    #hintButton, #revealButton {
        padding: 12px 15px;
        margin-top: 20px;
        font-weight: 600;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
    }

    #hintButton {
        background-color: #ffc107; /* CanlÄ± sarÄ± */
        color: #6a4a00; /* Koyu sarÄ± metin */
        background-image: linear-gradient(to right, #ffc107 0%, #ff8c00 100%);
    }

    #revealButton {
        background-color: #dc3545; /* KÄ±rmÄ±zÄ± */
        color: white;
        background-image: linear-gradient(to right, #dc3545 0%, #b30000 100%);
    }

    #hintButton:hover {
        background-position: right center;
        box-shadow: 0 6px 15px rgba(255, 193, 7, 0.4);
        transform: translateY(-2px);
    }
    #revealButton:hover {
        background-position: right center;
        box-shadow: 0 6px 15px rgba(220, 53, 69, 0.4);
        transform: translateY(-2px);
    }

    #hintButton:disabled, #revealButton:disabled {
        background-image: none;
        background-color: #e2e3e5;
        color: #6c757d;
        box-shadow: none;
        transform: none;
    }

    /* ZamanlayÄ±cÄ± stili */
    #timerDisplay {
        font-size: 1.8rem;
        font-weight: 700;
        color: #007bff;
        text-align: center;
        margin-bottom: 20px;
        padding: 10px;
        border: 2px dashed #007bff;
        border-radius: 10px;
        background-color: #e6f7ff;
    }

    /* Yeni Oyun BaÅŸlat butonu */
    #newGameBtn {
        background-color: #28a745;
        background-image: linear-gradient(to right, #28a745 0%, #218838 100%);
        box-shadow: 0 4px 10px rgba(40, 167, 69, 0.3);
    }

    #newGameBtn:hover {
        box-shadow: 0 6px 15px rgba(40, 167, 69, 0.4);
    }

    /* Kurallar bÃ¶lÃ¼mÃ¼ stili */
    #rulesSection {
        background-color: #e6f7ff;
        border: 1px solid #aaddff;
        border-radius: 10px; /* Daha belirgin yuvarlatma */
        padding: 20px 25px; /* Daha fazla iÃ§ boÅŸluk */
        margin-bottom: 25px; /* Alt boÅŸluk */
        box-shadow: 0 2px 8px rgba(0,0,0,0.08); /* Hafif gÃ¶lge */
    }
    #rulesSection h3 {
        color: #0056b3;
        margin-top: 0;
        font-size: 1.4em; /* Kural baÅŸlÄ±ÄŸÄ± font boyutu artÄ±rÄ±ldÄ± */
        text-align: center;
        border-bottom: 1px solid #aaddff; /* Alt Ã§izgi */
        padding-bottom: 10px;
        margin-bottom: 15px;
    }
    #rulesSection ul {
        list-style: none; /* VarsayÄ±lan madde iÅŸaretini kaldÄ±r */
        padding-left: 0;
        line-height: 1.6; /* SatÄ±r aralÄ±ÄŸÄ± artÄ±rÄ±ldÄ± */
        color: #555;
        font-size: 0.95em; /* Kurallar listesi font boyutu */
    }
    #rulesSection ul li {
        margin-bottom: 10px; /* Listeler arasÄ± boÅŸluk artÄ±rÄ±ldÄ± */
        position: relative; /* Ã–zel madde iÅŸareti iÃ§in */
        padding-left: 25px; /* Madde iÅŸareti iÃ§in boÅŸluk */
    }
    #rulesSection ul li::before { /* Ã–zel madde iÅŸareti */
        content: 'â€¢'; /* Madde iÅŸareti karakteri */
        color: #007bff; /* Mavi renk */
        font-weight: bold;
        display: inline-block;
        width: 1em;
        margin-left: -1em;
        position: absolute;
        left: 0;
        top: 0;
    }

    /* MEDIA QUERIES for Mobile Optimization */
    @media (max-width: 768px) { /* Tablet ve daha kÃ¼Ã§Ã¼k ekranlar */
        body {
            margin: 20px auto;
            padding: 20px; /* Mobil iÃ§in daha az padding */
            border-radius: 10px;
            box-shadow: none; /* Mobil cihazlarda gÃ¶lgeyi kaldÄ±rarak daha temiz gÃ¶rÃ¼nÃ¼m */
            background: #f0f4f8; /* Tek renk arka plan */
        }

        h1 {
            font-size: 2em; /* Daha kÃ¼Ã§Ã¼k baÅŸlÄ±k */
            margin-bottom: 15px;
        }

        input, select, button {
            padding: 10px;
            font-size: 0.9rem;
            margin: 8px 0;
        }

        button {
            padding: 10px 12px;
            font-size: 0.9rem;
        }

        #playerList li, #playerListGame li {
            font-size: 0.85rem;
            padding: 8px 10px;
        }

        #turnIndicator {
            font-size: 1.1rem;
            padding: 10px;
            margin: 15px 0;
        }

        #chainDisplay p {
            padding: 8px 12px;
            font-size: 0.95rem;
            margin: 8px 0;
        }

        #scoreBoard {
            font-size: 1.05rem;
            margin-top: 15px;
        }

        #scoreBoard span {
            font-size: 1.15rem;
        }

        #hintButton, #revealButton {
            width: 100%; /* Mobil cihazlarda butonlarÄ± tam geniÅŸlik yap */
            margin-top: 8px;
            margin-bottom: 4px;
        }
        #revealButton {
            margin-left: 0; /* Yan yana durma kaldÄ±rÄ±ldÄ± */
        }

        #timerDisplay {
            font-size: 1.2rem;
            padding: 8px;
            margin-bottom: 15px;
        }

        #rulesSection {
            padding: 15px 18px;
            margin-bottom: 20px;
        }
        #rulesSection h3 {
            font-size: 1.2em;
            padding-bottom: 8px;
            margin-bottom: 10px;
        }
        #rulesSection ul li {
            font-size: 0.85em;
            margin-bottom: 8px;
            padding-left: 20px;
        }
    }

    @media (max-width: 480px) { /* Telefonlar iÃ§in daha da Ã¶zel ayarlar */
        body {
            margin: 10px auto;
            padding: 10px;
        }

        h1 {
            font-size: 1.8em;
        }

        input, select, button {
            padding: 6px;
            font-size: 0.85rem;
            margin: 6px 0;
        }

        button {
            padding: 6px 8px;
            font-size: 0.85rem;
        }

        #playerList li, #playerListGame li {
            font-size: 0.75rem;
            padding: 5px 6px;
        }

        #turnIndicator {
            font-size: 1rem;
            padding: 6px;
        }

        #chainDisplay p {
            padding: 5px 8px;
            font-size: 0.9rem;
        }

        #scoreBoard {
            font-size: 0.9rem;
        }
        #scoreBoard span {
            font-size: 1rem;
        }

        #hintButton, #revealButton {
            font-size: 0.85rem;
            padding: 6px 8px;
        }

        #timerDisplay {
            font-size: 1rem;
            padding: 6px;
        }

        #rulesSection {
            padding: 10px 12px;
            margin-bottom: 15px;
        }
        #rulesSection h3 {
            font-size: 1.1em;
            padding-bottom: 5px;
            margin-bottom: 8px;
        }
        #rulesSection ul li {
            font-size: 0.75em;
            margin-bottom: 5px;
            padding-left: 18px;
        }
    }
  </style>
</head>
<body>

  <h1>Kelime Zinciri Ã‡ok Oyunculu</h1>

  <div id="rulesSection">
      <h3>Oyun KurallarÄ±</h3>
      <ul>
          <li>Oyun iki takÄ±mla (KÄ±rmÄ±zÄ± ve Mavi) oynanÄ±r.</li>
          <li>Her oyun 8 kelimelik bir "kelime zinciri" ile baÅŸlar. Ä°lk kelime aÃ§Ä±ktÄ±r, diÄŸerleri gizlidir (ilk harfi ve alt Ã§izgilerle).</li>
          <li>SÄ±rasÄ± gelen takÄ±m, sÄ±radaki gizli kelimeyi tahmin etmeye Ã§alÄ±ÅŸÄ±r.</li>
          <li>Tahmin edilen kelime, gÃ¶sterilen ilk harfle baÅŸlamalÄ±dÄ±r.</li>
          <li>**DoÄŸru Tahmin:** Kelime doÄŸru tahmin edilirse, kelime aÃ§Ä±lÄ±r ve sÄ±ra aynÄ± takÄ±mda kalÄ±r. TakÄ±m 10 puan kazanÄ±r. TÃ¼m kelimeler tamamlanÄ±rsa, son kelime iÃ§in ekstra 10 puan (toplam 20) kazanÄ±lÄ±r.</li>
          <li>**YanlÄ±ÅŸ Tahmin:** Kelime yanlÄ±ÅŸ tahmin edilirse veya yanlÄ±ÅŸ harfle baÅŸlarsa, sÄ±ra diÄŸer takÄ±ma geÃ§er. SÃ¼re sÄ±fÄ±rlanÄ±r.</li>
          <li>**Zaman SÄ±nÄ±rÄ±:** Her takÄ±mÄ±n bir tur iÃ§in 1 dakikasÄ± vardÄ±r. SÃ¼re dolarsa sÄ±ra otomatik olarak diÄŸer takÄ±ma geÃ§er ve sÃ¼re sÄ±fÄ±rlanÄ±r.</li>
          <li>**Ä°pucu Kullanma:** TakÄ±mÄ±n 2 ipucu hakkÄ± vardÄ±r. Ä°pucu kullanÄ±ldÄ±ÄŸÄ±nda, sÄ±radaki kelimenin 2. harfi aÃ§Ä±lÄ±r. SÃ¼re veya sÄ±ra deÄŸiÅŸmez. TakÄ±mdan 5 puan dÃ¼ÅŸÃ¼lÃ¼r.</li>
          <li>**Kelimeyi AÃ§ma:** TakÄ±mÄ±n 2 kelime aÃ§ma hakkÄ± vardÄ±r. Kelime aÃ§Ä±ldÄ±ÄŸÄ±nda, sÄ±radaki kelime tamamen aÃ§Ä±lÄ±r. SÃ¼re veya sÄ±ra deÄŸiÅŸmez. TakÄ±mdan 10 puan dÃ¼ÅŸÃ¼lÃ¼r.</li>
          <li>Oyun, tÃ¼m kelimeler doÄŸru tahmin edildiÄŸinde biter. En yÃ¼ksek puana sahip takÄ±m kazanÄ±r.</li>
      </ul>
  </div>

  <div id="joinForm">
    <label>Oda ID (Ã¶rn: room123):</label>
    <input type="text" id="roomIdInput" placeholder="Oda ID girin" />

    <label>AdÄ±nÄ±z:</label>
    <input type="text" id="usernameInput" placeholder="Ä°sminizi girin" />

    <label>TakÄ±m SeÃ§in:</label>
    <select id="teamSelect">
      <option value="kirmizi">ğŸ”´ KÄ±rmÄ±zÄ±</option>
      <option value="mavi">ğŸ”µ Mavi</option>
    </select>

    <button id="joinBtn">Odaya KatÄ±l / OluÅŸtur</button>
  </div>

  <div id="lobby" style="display:none;">
    <h3>Oda: <span id="currentRoomIdDisplay"></span></h3>
    <h4>Oyuncular:</h4>
    <ul id="playerList"></ul>
    <button id="startGameBtn" disabled>Oyunu BaÅŸlat</button>
  </div>

  <div id="gameArea" style="display:none;">
    <h3>Kelime Zinciri</h3>
    <div id="timerDisplay"></div>
    <div id="turnIndicator"></div>
    <div id="chainDisplay"></div>

    <h4>Aktif Oyuncular:</h4>
    <ul id="playerListGame"></ul>


    <label>Tahmininiz (baÅŸ harfi gÃ¶rÃ¼nen kelimeyi tamamlayÄ±n):</label>
    <input type="text" id="guessInput" autocomplete="off" />
    <button id="submitGuessBtn">Tahmin GÃ¶nder</button>

    <div style="display:flex; justify-content: space-between;">
      <button id="hintButton" disabled>Ä°pucu Kullan (2 hakkÄ±nÄ±z var)</button>
      <button id="revealButton" disabled>Kelimeyi AÃ§ (2 hakkÄ±nÄ±z var)</button>
    </div>

    <div id="scoreBoard">
      ğŸ”´ KÄ±rmÄ±zÄ±: <span id="scoreKirmizi">0</span> | ğŸ”µ Mavi: <span id="scoreMavi">0</span>
    </div>

    <div id="statusMessage"></div>
    <button id="newGameBtn" style="margin-top:15px; background:#28a745; color:#fff; display:none;">Yeni Oyun BaÅŸlat</button>

  </div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAakIndhM83k5tuXtuel5-WOCah0nqWrZ4",
      authDomain: "kelime-zinciri-5c998.firebaseapp.com",
      databaseURL: "https://kelime-zinciri-5c998-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "kelime-zinciri-5c998",
      storageBucket: "kelime-zinciri-5c998.appspot.com",
      messagingSenderId: "708438070367",
      appId: "1:708438070367:web:5b0b9684b942aaa07477ea"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Global deÄŸiÅŸkenler
    let currentRoomId = null;
    let playerId = null;
    let playerTeam = null;
    let currentTurn = null;
    let currentChain = [];
    let originalChain = [];
    let guesses = {};
    let hintsLeft = { kirmizi: 2, mavi: 2 };
    let revealsLeft = { kirmizi: 2, mavi: 2 };
    let scores = { kirmizi: 0, mavi: 0 };
    let wordGraph = {};

    let turnTimerInterval = null;
    const defaultTimerDuration = 60; // Her tur 60 saniye (1 dakika)

    // UI elementleri referanslarÄ±
    const joinForm = document.getElementById('joinForm');
    const lobby = document.getElementById('lobby');
    const gameArea = document.getElementById('gameArea');
    const playerListElLobby = document.getElementById('playerList');
    const playerListElGame = document.getElementById('playerListGame');
    const currentRoomIdDisplay = document.getElementById('currentRoomIdDisplay');
    const turnIndicator = document.getElementById('turnIndicator');
    const chainDisplay = document.getElementById('chainDisplay');
    const guessInput = document.getElementById('guessInput');
    const submitGuessBtn = document.getElementById('submitGuessBtn');
    const hintButton = document.getElementById('hintButton');
    const revealButton = document.getElementById('revealButton');
    const statusMessage = document.getElementById('statusMessage');
    const startGameBtn = document.getElementById('startGameBtn');
    const newGameBtn = document.getElementById('newGameBtn');
    const scoreKirmiziEl = document.getElementById('scoreKirmizi');
    const scoreMaviEl = document.getElementById('scoreMavi');
    const timerDisplay = document.getElementById('timerDisplay');
    const rulesSection = document.getElementById('rulesSection');


    // YardÄ±mcÄ± fonksiyonlar
    function setStatus(msg, isError = false) {
      statusMessage.textContent = msg;
      statusMessage.style.color = isError ? 'red' : 'green';
    }

    function updateScoreUI() {
      scoreKirmiziEl.textContent = scores.kirmizi;
      scoreMaviEl.textContent = scores.mavi;
    }

    function updateHintRevealButtons() {
      const isMyTurn = playerTeam === currentTurn;
      hintButton.disabled = !isMyTurn || (hintsLeft[playerTeam] <= 0);
      revealButton.disabled = !isMyTurn || (revealsLeft[playerTeam] <= 0);
      hintButton.textContent = `Ä°pucu Kullan (${hintsLeft[playerTeam]} hakkÄ±nÄ±z var)`;
      revealButton.textContent = `Kelimeyi AÃ§ (${revealsLeft[playerTeam]} hakkÄ±nÄ±z var)`;
    }

    // Kelime zinciri oluÅŸturma fonksiyonu
    function createChain(graph, startWord, length = 8) {
      let chain = [startWord];
      let used = new Set([startWord]);
      let current = startWord;

      for (let i = 1; i < length; i++) {
        const nextWords = graph[current];
        if (!nextWords || nextWords.length === 0) break;

        const filtered = nextWords.filter(w => graph.hasOwnProperty(w) && !used.has(w));
        if (filtered.length === 0) break;

        current = filtered[Math.floor(Math.random() * filtered.length)];
        chain.push(current);
        used.add(current);
      }
      return chain;
    }

    function createChainWithRetries(graph, length = 8, retries = 50) {
      const keys = Object.keys(graph);
      if (keys.length === 0) return [];

      for (let i = 0; i < retries; i++) {
        const start = keys[Math.floor(Math.random() * keys.length)];
        const chain = createChain(graph, start, length);
        if (chain.length === length) return chain;
      }
      return [];
    }

    // Firebase dinleyicileri
    function listenRoom() {
      if (!currentRoomId) return;

      // Oyuncu listesi dinleyicisi (hem lobide hem de oyun alanÄ±nda gÃ¼ncel tutar)
      db.ref(`rooms/${currentRoomId}/players`).on('value', snapshot => {
        const players = snapshot.val() || {};
        playerListElLobby.innerHTML = '';
        playerListElGame.innerHTML = '';
        Object.entries(players).forEach(([id, player]) => {
          const liLobby = document.createElement('li');
          liLobby.textContent = `${player.name} (${player.team === 'kirmizi' ? 'ğŸ”´ KÄ±rmÄ±zÄ±' : 'ğŸ”µ Mavi'})`;
          playerListElLobby.appendChild(liLobby);

          const liGame = document.createElement('li');
          liGame.textContent = `${player.name} (${player.team === 'kirmizi' ? 'ğŸ”´ KÄ±rmÄ±zÄ±' : 'ğŸ”µ Mavi'})`;
          playerListElGame.appendChild(liGame);
        });
        startGameBtn.disabled = Object.keys(players).length < 1;
      });

      // Oyun durumu dinleyicisi
      db.ref(`rooms/${currentRoomId}/gameState`).on('value', snapshot => {
        const state = snapshot.val();

        if (!state || state.status !== 'playing') {
          rulesSection.style.display = 'block'; // Oyun bitince kurallarÄ± tekrar gÃ¶ster
          joinForm.style.display = 'block'; // Oyun bitince katÄ±lma formunu tekrar gÃ¶ster

          gameArea.style.display = 'none';
          lobby.style.display = 'block';
          turnIndicator.style.display = 'none';
          timerDisplay.style.display = 'none';
          newGameBtn.style.display = 'block';

          if (turnTimerInterval) {
              clearInterval(turnTimerInterval);
              turnTimerInterval = null;
          }

          if (!state) {
            currentChain = [];
            originalChain = [];
            guesses = {};
            currentTurn = null;
            hintsLeft = { kirmizi: 2, mavi: 2 };
            revealsLeft = { kirmizi: 2, mavi: 2 };
            scores = { kirmizi: 0, mavi: 0 };
            setStatus('Oyun baÅŸlamadÄ±. BaÅŸlamak iÃ§in "Oyunu BaÅŸlat" butonuna basÄ±n.', false);
          } else if (state.status === 'finished') {
            const winnerTeam = state.winner;
            if (winnerTeam) {
                const winnerName = winnerTeam === 'kirmizi' ? 'ğŸ”´ KÄ±rmÄ±zÄ± TakÄ±m' : 'ğŸ”µ Mavi TakÄ±m';
                setStatus(`Oyun bitti! Kazanan: ${winnerName}`, false);
                alert(`Oyun Bitti! Kazanan: ${winnerName}`); // Alert ile de gÃ¶ster
            } else {
                setStatus('Oyun bitti!', false);
            }
          }
          return;
        }

        // Oyun oynanÄ±yorsa, kurallar ve katÄ±lma formunu gizle
        rulesSection.style.display = 'none';
        joinForm.style.display = 'none';

        lobby.style.display = 'none';
        gameArea.style.display = 'block';
        turnIndicator.style.display = 'block';
        timerDisplay.style.display = 'block';
        newGameBtn.style.display = 'none';

        currentChain = state.chain || [];
        originalChain = state.originalChain || [];
        guesses = state.guesses || {};
        currentTurn = state.currentTurn;
        hintsLeft = state.hintsLeft || { kirmizi: 2, mavi: 2 };
        revealsLeft = state.revealsLeft || { kirmizi: 2, mavi: 2 };
        scores = state.scores || { kirmizi: 0, mavi: 0 };
        const timerStartTime = state.timerStartTime || Date.now();
        const timerDuration = state.timerDuration || defaultTimerDuration;


        renderChain();
        updateTurnUI();
        updateHintRevealButtons();
        updateScoreUI();
        setStatus('');

        const isMyTurn = playerTeam === currentTurn;
        guessInput.disabled = !isMyTurn;
        submitGuessBtn.disabled = !isMyTurn;

        startTurnTimer(timerStartTime, timerDuration, currentTurn); 
      });
    }

    // ZamanlayÄ±cÄ±yÄ± baÅŸlatma fonksiyonu
    function startTurnTimer(startTime, duration, currentTurnOnStart) {
        if (turnTimerInterval) {
            clearInterval(turnTimerInterval);
        }

        turnTimerInterval = setInterval(() => {
            const elapsedTime = (Date.now() - startTime) / 1000;
            const remainingTime = Math.max(0, duration - Math.floor(elapsedTime));

            const minutes = Math.floor(remainingTime / 60);
            const seconds = remainingTime % 60;
            timerDisplay.textContent = `Kalan SÃ¼re: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

            if (remainingTime <= 0) {
                clearInterval(turnTimerInterval);
                turnTimerInterval = null;
                // SÃ¼re dolduÄŸunda sÄ±rayÄ± deÄŸiÅŸtirmek iÃ§in Firebase'i gÃ¼ncelle
                db.ref(`rooms/${currentRoomId}/gameState`).transaction(gameState => {
                    // Transaction iÃ§inde, Firebase'deki mevcut sÄ±ra, zamanlayÄ±cÄ±nÄ±n baÅŸladÄ±ÄŸÄ± sÄ±rayla aynÄ±ysa deÄŸiÅŸtir
                    if (gameState && gameState.status === 'playing' && gameState.currentTurn === currentTurnOnStart) {
                        const nextTurn = currentTurnOnStart === 'kirmizi' ? 'mavi' : 'kirmizi';
                        gameState.currentTurn = nextTurn;
                        gameState.timerStartTime = Date.now(); // Yeni turun zamanlayÄ±cÄ±sÄ±nÄ± sÄ±fÄ±rla
                        setStatus(`SÃ¼re doldu! SÄ±ra ${nextTurn === 'kirmizi' ? 'ğŸ”´ KÄ±rmÄ±zÄ±' : 'ğŸ”µ Mavi'} TakÄ±m'a geÃ§ti.`, true);
                        return gameState;
                    }
                    return; // EÄŸer sÄ±ra zaten baÅŸka bir oyuncu tarafÄ±ndan deÄŸiÅŸtirilmiÅŸse veya oyun durumu geÃ§erli deÄŸilse
                });
            }
        }, 1000);
    }


    function renderChain() {
      chainDisplay.innerHTML = '';
      for (let i = 0; i < currentChain.length; i++) {
        const p = document.createElement('p');
        if (guesses.hasOwnProperty(i)) {
          p.textContent = `${i + 1}. ${originalChain[i]}`;
          p.classList.add('correct');
        } else {
          p.textContent = `${i + 1}. ${currentChain[i]}`;
        }
        chainDisplay.appendChild(p);
      }
    }

    function updateTurnUI() {
      if (!currentTurn) {
        turnIndicator.style.display = 'none';
        return;
      }
      turnIndicator.textContent = `SÄ±ra: ${currentTurn === 'kirmizi' ? 'ğŸ”´ KÄ±rmÄ±zÄ± TakÄ±m' : 'ğŸ”µ Mavi TakÄ±m'}`;
      turnIndicator.className = currentTurn;
      turnIndicator.style.display = 'block';
    }

    // --- ANA OYUN MANTIÄI FONKSÄ°YONLARI ---
    async function handleGuess() {
      const guess = guessInput.value.trim().toLowerCase();
      if (!guess) return setStatus('LÃ¼tfen tahmin girin!', true);
      if (!currentRoomId) return setStatus('Odaya baÄŸlÄ± deÄŸilsiniz!', true);
      if (playerTeam !== currentTurn) return setStatus('SÄ±ra sizde deÄŸil.', true);

      try {
        await db.ref(`rooms/${currentRoomId}/gameState`).transaction(gameState => {
          if (!gameState || gameState.status !== 'playing' || !gameState.originalChain || !Array.isArray(gameState.originalChain)) {
            console.warn('Transaction iptal edildi: GeÃ§ersiz gameState veya oyun durumu.');
            return;
          }

          gameState.guesses = gameState.guesses || {};
          const nextIndex = Object.keys(gameState.guesses).length; 
          const correctWord = gameState.originalChain[nextIndex];

          if (!correctWord) {
            gameState.status = 'finished';
            return gameState;
          }

          if (guess.charAt(0) !== correctWord.charAt(0)) {
            setStatus(`YanlÄ±ÅŸ harf! Kelime '${correctWord.charAt(0)}' ile baÅŸlamalÄ±ydÄ±. SÄ±ra diÄŸer takÄ±ma geÃ§ti.`, true);
            gameState.currentTurn = (gameState.currentTurn === 'kirmizi' ? 'mavi' : 'kirmizi');
            gameState.timerStartTime = Date.now(); // YanlÄ±ÅŸ tahminde sÄ±ra deÄŸiÅŸince zamanlayÄ±cÄ±yÄ± sÄ±fÄ±rla
            return gameState;
          }

          if (guess === correctWord.toLowerCase()) {
            gameState.guesses[nextIndex] = correctWord;
            gameState.chain[nextIndex] = correctWord;

            gameState.scores = gameState.scores || { kirmizi: 0, mavi: 0 };
            gameState.scores[playerTeam] = (gameState.scores[playerTeam] || 0) + 10;

            if (Object.keys(gameState.guesses).length === gameState.originalChain.length) {
              gameState.status = 'finished';
              gameState.winner = playerTeam; // KazananÄ± set et
              setStatus(`Oyun bitti! Kazanan: ${playerTeam === 'kirmizi' ? 'ğŸ”´ KÄ±rmÄ±zÄ±' : 'ğŸ”µ Mavi'} TakÄ±m`, false);
            } else {
              setStatus('DoÄŸru tahmin! Devam edin.', false);
              // DoÄŸru tahminde zamanlayÄ±cÄ± SIFIRLANMAYACAK, sÄ±ra aynÄ± takÄ±mda kalacak
            }
          } else {
            setStatus('YanlÄ±ÅŸ tahmin! SÄ±ra diÄŸer takÄ±ma geÃ§ti.', true);
            gameState.currentTurn = (gameState.currentTurn === 'kirmizi' ? 'mavi' : 'kirmizi');
            gameState.timerStartTime = Date.now(); // YanlÄ±ÅŸ tahminde zamanlayÄ±cÄ±yÄ± sÄ±fÄ±rla
          }
          return gameState;
        });
        guessInput.value = '';
      } catch (err) {
        console.error('Tahmin gÃ¶nderme hatasÄ±:', err);
        setStatus('Tahmin gÃ¶nderme hatasÄ±: ' + err.message, true);
      }
    };


    // Ä°pucu kullanma butonu click handler
    async function useHint() {
      if (!currentRoomId) return setStatus('Odaya baÄŸlÄ± deÄŸilsiniz!', true);
      if (playerTeam !== currentTurn) return setStatus('SÄ±ra sizde deÄŸil.', true);
      if (hintsLeft[playerTeam] <= 0) return setStatus('Ä°pucu hakkÄ±nÄ±z kalmadÄ±.', true);

      try {
        await db.ref(`rooms/${currentRoomId}/gameState`).transaction(gameState => {
          if (!gameState || gameState.status !== 'playing' || !gameState.chain || !Array.isArray(gameState.chain) || !gameState.originalChain || !Array.isArray(gameState.originalChain) || !gameState.hintsLeft) {
            console.warn('Transaction iptal edildi: GeÃ§ersiz gameState veya oyun durumu.');
            return;
          }

          gameState.guesses = gameState.guesses || {};
          const nextIndex = Object.keys(gameState.guesses).length; // Tahmin edilmesi gereken kelimenin indeksi

          const wordToHint = gameState.originalChain[nextIndex];
          if (!wordToHint) {
            setStatus('Tahmin edilecek kelime kalmadÄ±.', true);
            return;
          }

          if (wordToHint.length < 2) {
            setStatus('Kelime Ã§ok kÄ±sa, ipucu verilemiyor.', true);
            return;
          }

          // Ä°pucu kontrolÃ¼: Kelimenin ikinci harfi zaten aÃ§Ä±k mÄ±? (Alt Ã§izgi formatÄ±na gÃ¶re)
          // currentChain[nextIndex] -> 'A_ _ _' ise ikinci karakter boÅŸluktur.
          // currentChain[nextIndex][1] === wordToHint[1] -> 'l' ise, ikinci harf aÃ§Ä±lmÄ±ÅŸ demektir.
          // Bu mantÄ±kla, eÄŸer ikinci karakter boÅŸluk deÄŸilse ve orijinal kelimenin ikinci karakterine eÅŸitse, zaten aÃ§Ä±ktÄ±r.
          // Veya basitÃ§e alt Ã§izgi iÃ§ermiyorsa kelime zaten aÃ§Ä±k veya kÄ±smen aÃ§Ä±k olabilir.
          if (!gameState.chain[nextIndex].includes('_')) { // Kelime tamamen aÃ§Ä±k mÄ± kontrolÃ¼
              setStatus('Kelime zaten tamamen aÃ§Ä±k.', true);
              return;
          }
          // EÄŸer kelime formatÄ± A_ _ _ ve ikinci karakteri henÃ¼z gizli ise (yani boÅŸluk veya alt Ã§izgi)
          // ve orijinal kelimenin ikinci harfi ile eÅŸleÅŸmiyor ise (yani ilk ipucu henÃ¼z verilmemiÅŸse)
          // veya daha basiti: eÄŸer mevcut gÃ¶sterilen kelime orijinal kelime deÄŸilse ve hala alt Ã§izgi iÃ§eriyorsa
          if (gameState.chain[nextIndex][1] === '_') { // Ä°kinci karakter hala gizliyse
            // Ä°pucu uygula: 2. harfi aÃ§
            gameState.chain[nextIndex] = wordToHint[0] + wordToHint[1] + '_ '.repeat(wordToHint.length - 2).trim();
            gameState.hintsLeft[playerTeam]--;
            gameState.scores = gameState.scores || {kirmizi:0, mavi:0};
            gameState.scores[playerTeam] = Math.max(0, (gameState.scores[playerTeam] || 0) - 5);

            // Ä°pucu kullanÄ±ldÄ±ÄŸÄ±nda SÃœRE SIFIRLANMAYACAK ve SIRA DEÄÄ°ÅMEYECEK
            setStatus('Ä°pucu kullanÄ±ldÄ±: 2. harf aÃ§Ä±ldÄ±.', false);
            return gameState;
          }

          // EÄŸer kelime A_ _ _ formatÄ±nda deÄŸilse veya ipucu zaten kullanÄ±lmÄ±ÅŸsa (Ã¶rn: "Ap_ _")
          setStatus('2. harf zaten aÃ§Ä±k veya kelime aÃ§Ä±ldÄ±.', true);
          return;
        });
      } catch (err) {
        console.error('Ä°pucu kullanma hatasÄ±:', err);
        setStatus('Ä°pucu kullanma hatasÄ±: ' + err.message, true);
      }
    };

    // Kelime aÃ§ma butonu click handler
    async function revealWord() {
      if (!currentRoomId) return setStatus('Odaya baÄŸlÄ± deÄŸilsiniz!', true);
      if (playerTeam !== currentTurn) return setStatus('SÄ±ra sizde deÄŸil.', true);
      if (revealsLeft[playerTeam] <= 0) return setStatus('Kelime aÃ§ma hakkÄ±nÄ±z kalmadÄ±.', true);

      try {
        await db.ref(`rooms/${currentRoomId}/gameState`).transaction(gameState => {
          if (!gameState || gameState.status !== 'playing' || !gameState.chain || !Array.isArray(gameState.chain) || !gameState.originalChain || !Array.isArray(gameState.originalChain) || !gameState.revealsLeft || !gameState.guesses) {
            console.warn('Transaction iptal edildi: GeÃ§ersiz gameState veya oyun durumu.');
            return;
          }

          gameState.guesses = gameState.guesses || {};
          const nextIndex = Object.keys(gameState.guesses).length;
          const wordToReveal = gameState.originalChain[nextIndex];

          if (!wordToReveal) {
            setStatus('Tahmin edilecek kelime kalmadÄ±.', true);
            return;
          }

          // Kelime zaten tamamen aÃ§Ä±ksa (tahmin edilmiÅŸse veya Ã¶nceden aÃ§Ä±lmÄ±ÅŸsa)
          if (gameState.chain[nextIndex] === wordToReveal) {
              setStatus('Kelime zaten tamamen aÃ§Ä±k.', true);
              return;
          }

          gameState.chain[nextIndex] = wordToReveal;
          gameState.guesses[nextIndex] = wordToReveal;
          gameState.revealsLeft[playerTeam]--;

          gameState.scores = gameState.scores || {kirmizi:0, mavi:0};
          gameState.scores[playerTeam] = Math.max(0, (gameState.scores[playerTeam] || 0) - 10);

          // Kelime aÃ§Ä±ldÄ±ÄŸÄ±nda SÃœRE SIFIRLANMAYACAK ve SIRA DEÄÄ°ÅMEYECEK
          // gameState.currentTurn = (gameState.currentTurn === 'kirmizi' ? 'mavi' : 'kirmizi'); // BU SATIR KALDIRILDI
          // gameState.timerStartTime = Date.now(); // BU SATIR KALDIRILDI

          if (Object.keys(gameState.guesses).length === gameState.originalChain.length) {
            gameState.status = 'finished';
            gameState.winner = playerTeam;
            setStatus(`Oyun bitti! Kazanan: ${playerTeam === 'kirmizi' ? 'ğŸ”´ KÄ±rmÄ±zÄ±' : 'ğŸ”µ Mavi'} TakÄ±m`, false);
          } else {
            setStatus('Kelime aÃ§Ä±ldÄ±!', false); // SÄ±ra deÄŸiÅŸmediÄŸi iÃ§in mesaj gÃ¼ncellendi
          }
          return gameState;
        });
      } catch (err) {
        console.error('Kelime aÃ§ma hatasÄ±:', err);
        setStatus('Kelime aÃ§ma hatasÄ±: ' + err.message, true);
      }
    };

    // `newGameBtn` click handler (ayrÄ±ca startGameBtn'e de atanacak)
    async function startNewGame() {
      if (!currentRoomId) return setStatus('Ã–nce odaya katÄ±lÄ±n!', true);

      try {
        const playersSnap = await db.ref(`rooms/${currentRoomId}/players`).once('value');
        if (!playersSnap.exists() || Object.keys(playersSnap.val()).length < 1) {
          setStatus('Oyuncu bulunamadÄ±. LÃ¼tfen odayÄ± yeniden oluÅŸturun veya en az 1 oyuncu olduÄŸundan emin olun.', true);
          return;
        }
        if (!wordGraph || Object.keys(wordGraph).length === 0) {
          setStatus('Kelime grafiÄŸi yÃ¼klenmedi. SayfayÄ± yenileyin.', true);
          return;
        }

        await db.ref(`rooms/${currentRoomId}/gameState`).remove();
        await new Promise(resolve => setTimeout(resolve, 300)); 

        let chain = createChainWithRetries(wordGraph, 8);
        if (chain.length === 0) {
          setStatus('Yeterli kelime iliÅŸkisi bulunamadÄ± veya zincir oluÅŸturulamadÄ±. JSON dosyasÄ±nÄ± kontrol edin.', true);
          return;
        }

        const hiddenChain = chain.map((w, i) => {
          if (i === 0) return w;
          // Gizli kelime formatÄ± (alt Ã§izgilere geri dÃ¶ndÃ¼)
          return w[0] + '_ '.repeat(w.length - 1).trim(); 
        });

        await db.ref(`rooms/${currentRoomId}/gameState`).set({
          status: 'playing',
          chain: hiddenChain,
          originalChain: chain,
          guesses: {},
          currentTurn: 'kirmizi',
          hintsLeft: { kirmizi: 2, mavi: 2 },
          revealsLeft: { kirmizi: 2, mavi: 2 },
          scores: { kirmizi: 0, mavi: 0 },
          winner: null,
          timerStartTime: Date.now(), // ZamanlayÄ±cÄ± baÅŸlangÄ±Ã§ zamanÄ±
          timerDuration: defaultTimerDuration
        });

        setStatus('Yeni oyun baÅŸlatÄ±ldÄ±!', false);

      } catch (err) {
        alert('Yeni oyun baÅŸlatma hatasÄ±: ' + err.message);
      }
    }


    // Sayfa yÃ¼klendiÄŸinde URL'deki oda ID'sini kontrol et ve kelime grafiÄŸini yÃ¼kle
    document.addEventListener('DOMContentLoaded', () => {
      // Input alanlarÄ±na ve butonlara olay dinleyicileri ata
      document.getElementById('joinBtn').addEventListener('click', async () => {
        const roomIdVal = document.getElementById('roomIdInput').value.trim();
        const usernameVal = document.getElementById('usernameInput').value.trim();
        const teamVal = document.getElementById('teamSelect').value;

        if (!roomIdVal || !usernameVal) {
          alert('LÃ¼tfen oda ID ve isminizi girin!');
          return;
        }

        currentRoomId = roomIdVal;
        playerTeam = teamVal;
        playerId = 'p_' + Math.random().toString(36).substring(2, 10);

        try {
          await db.ref(`rooms/${currentRoomId}/players/${playerId}`).set({
            name: usernameVal,
            team: playerTeam
          });

          currentRoomIdDisplay.textContent = currentRoomId;
          joinForm.style.display = 'none';
          lobby.style.display = 'block';
          gameArea.style.display = 'none';
          // Oyuna katÄ±lÄ±rken kurallarÄ± gizle
          rulesSection.style.display = 'none'; 
          setStatus('Odaya katÄ±ldÄ±nÄ±z. Oyun baÅŸlamayÄ± bekleyin.', false);

          listenRoom();

        } catch (err) {
          alert('Odaya katÄ±lÄ±rken hata: ' + err.message);
        }
      });

      // startGameBtn click handler
      startGameBtn.addEventListener('click', startNewGame);

      // submitGuessBtn click handler
      submitGuessBtn.addEventListener('click', handleGuess);

      // hintButton click handler
      hintButton.addEventListener('click', useHint);

      // revealButton click handler
      revealButton.addEventListener('click', revealWord);

      // newGameBtn click handler
      newGameBtn.addEventListener('click', startNewGame); // startNewGame ile aynÄ± iÅŸlevi gÃ¶rÃ¼r

      // Enter tuÅŸuyla tahmin gÃ¶nderme
      if (guessInput) {
        guessInput.addEventListener('keypress', function(event) {
          if (event.key === 'Enter') {
            event.preventDefault(); // VarsayÄ±lan Enter davranÄ±ÅŸÄ±nÄ± engelle
            submitGuessBtn.click(); // Programatik olarak butonu tÄ±kla
          }
        });
      }

      // URL'den oda ID'si varsa inputu doldur
      const urlParams = new URLSearchParams(window.location.search);
      const roomFromUrl = urlParams.get('room');
      if (roomFromUrl) {
        document.getElementById('roomIdInput').value = roomFromUrl;
      }

      // Kelime grafiÄŸi JSON dosyasÄ±nÄ± yÃ¼kle
      fetch('wordGraph_2000.json')
        .then(res => {
          if (!res.ok) {
            throw new Error(`HTTP Hata! Durum: ${res.status} - ${res.statusText}`);
          }
          return res.json();
        })
        .then(data => {
          wordGraph = data;
          console.log("Kelime grafiÄŸi baÅŸarÄ±yla yÃ¼klendi. Toplam kelime sayÄ±sÄ±:", Object.keys(wordGraph).length);
          if (Object.keys(wordGraph).length === 0) {
            setStatus("Kelime grafiÄŸi boÅŸ yÃ¼klendi. wordGraph_2000.json dosyanÄ±zda kelime ve iliÅŸki tanÄ±mlarÄ± olduÄŸundan emin olun.", true);
          }
        })
        .catch(err => {
          console.error("Kelime grafiÄŸi yÃ¼kleme hatasÄ±:", err);
          setStatus("Kelime grafiÄŸi yÃ¼klenemedi! wordGraph_2000.json dosyasÄ±nÄ±n doÄŸru yolda olduÄŸundan ve geÃ§erli bir JSON formatÄ±nda olduÄŸundan emin olun.", true);
        });
    });

        #guessHistory {
            background-color: #f8fafc;
            border: 1px solid #e0e6ed;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            max-height: 300px;
            overflow-y: auto;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        #guessHistory h4 {
            margin: 0 0 10px 0;
            font-size: 1.2em;
            color: #2a415b;
            text-align: center;
            border-bottom: 1px solid #aaddff;
            padding-bottom: 8px;
        }

        #guessHistoryList {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        #guessHistoryList li {
            padding: 8px 10px;
            font-size: 0.95rem;
            color: #4a658a;
            border-bottom: 1px solid #eef2f5;
        }

        #guessHistoryList li:last-child {
            border-bottom: none;
        }

        #guessHistoryList li.correct {
            background-color: #e6ffe6;
            color: #155724;
        }

        #guessHistoryList li.incorrect {
            background-color: #ffe5e5;
            color: #cc0000;
        }

        /* Mobil cihazlar iÃ§in optimizasyon */
        @media (max-width: 768px) {
            #guessHistory {
                margin: 15px 0;
                padding: 10px;
                max-height: 200px;
            }

            #guessHistory h4 {
                font-size: 1em;
            }

            #guessHistoryList li {
                font-size: 0.85rem;
                padding: 6px 8px;
            }
        }

        @media (max-width: 480px) {
            #guessHistory {
                margin: 10px 0;
                padding: 8px;
                max-height: 150px;
            }

            #guessHistory h4 {
                font-size: 0.9em;
            }

            #guessHistoryList li {
                font-size: 0.75rem;
                padding: 5px 6px;
            }
        }
        /* gameArea iÃ§in iki sÃ¼tunlu dÃ¼zen */
        #gameArea {
          width: 100%;
          max-width: 760px;
          padding: 20px;
        }

        .game-container {
          display: flex;
          gap: 20px;
        }

        .game-content {
          flex: 1;
        }

        #guessHistory {
          width: 250px;
          background-color: #f8fafc;
          border: 1px solid #e0e6ed;
          border-radius: 10px;
          padding: 15px;
          max-height: 400px;
          overflow-y: auto;
          box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        #guessHistory h4 {
          margin: 0 0 10px 0;
          font-size: 1.2em;
          color: #2a415b;
          text-align: center;
          border-bottom: 1px solid #aaddff;
          padding-bottom: 8px;
        }

        #guessHistoryList {
          list-style-type: none;
          padding: 0;
          margin: 0;
        }

        #guessHistoryList li {
          padding: 8px 10px;
          font-size: 0.95rem;
          color: #4a658a;
          border-bottom: 1px solid #eef2f5;
        }

        #guessHistoryList li:last-child {
          border-bottom: none;
        }

        #guessHistoryList li.correct {
          background-color: #e6ffe6;
          color: #155724;
        }

        #guessHistoryList li.incorrect {
          background-color: #ffe5e5;
          color: #cc0000;
        }

        @media (max-width: 768px) {
          .game-container {
            flex-direction: column;
          }

          #guessHistory {
            width: 100%;
            margin: 15px 0;
            padding: 10px;
            max-height: 200px;
          }

          #guessHistory h4 {
            font-size: 1em;
          }

          #guessHistoryList li {
            font-size: 0.85rem;
            padding: 6px 8px;
          }
        }

        @media (max-width: 480px) {
          #guessHistory {
            margin: 10px 0;
            padding: 8px;
            max-height: 150px;
          }

          #guessHistory h4 {
            font-size: 0.9em;
          }

          #guessHistoryList li {
            font-size: 0.75rem;
            padding: 5px 6px;
          }
        }
  </script>
</body>
</html>